<mat-tab-group [(selectedIndex)]="currentTabIndex" class="w-full">
    <!-- Description Tab -->
    <mat-tab label="Description">
        <form [formGroup]="hotelForm">
            <h2
                class="text-xl font-semibold mb-5"
            >
                General Information
            </h2>
            <mat-form-field class="w-full">
                <mat-label>Hotel Name</mat-label>
                <input matInput formControlName="HotelName" />
            </mat-form-field>

            <div class="sm:flex gap-3">
                <mat-form-field class="w-full">
                    <mat-label>Rating</mat-label>
                    <mat-select formControlName="HotelRate" placeholder="Select Hotel Rating">
                        <mat-option value="1">1</mat-option>
                        <mat-option value="2">2</mat-option>
                        <mat-option value="3">3</mat-option>
                        <mat-option value="4">4</mat-option>
                        <mat-option value="5">5</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field class="w-full">
                    <mat-label>City Hebrew</mat-label>
                    <input matInput formControlName="cityHeb" />
                </mat-form-field>

                <mat-form-field class="w-full">
                    <mat-label>Country Hebrew</mat-label>
                    <input matInput formControlName="countryName" />
                </mat-form-field>
            </div>

            <!-- Kosher Checkbox -->
            <mat-checkbox formControlName="isKosher">Kosher Hotel</mat-checkbox>

            <h2
                class="text-xl font-semibold mb-5"
            >
                Location
            </h2>
            <div formGroupName="HotelLocation">
                <mat-form-field class="w-full">
                    <mat-label>Description</mat-label>
                    <textarea matInput formControlName="Description"></textarea>
                </mat-form-field>
                <div class="sm:flex gap-3">
                    <mat-form-field>
                        <mat-label>Latitude</mat-label>
                        <input matInput formControlName="latitude" />
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Longitude</mat-label>
                        <input matInput formControlName="longitude" />
                    </mat-form-field>
                </div>
                <div class="sm:flex gap-3">
                    <mat-form-field>
                        <mat-label>City Code</mat-label>
                        <input matInput formControlName="CityCode" />
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>City Name</mat-label>
                        <input matInput formControlName="CityName" />
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Country Code</mat-label>
                        <input matInput formControlName="CountryName" />
                    </mat-form-field>
                    <mat-form-field>
                        <mat-label>Country Name</mat-label>
                        <input matInput formControlName="CountryCode" />
                    </mat-form-field>
                </div>
                <div formGroupName="Address">
                    <div class="sm:flex gap-3">
                        <mat-form-field>
                            <mat-label>Street</mat-label>
                            <input matInput formControlName="street" />
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Zip Code</mat-label>
                            <input matInput formControlName="zipcode" />
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>House Number</mat-label>
                            <input matInput formControlName="house_number" />
                        </mat-form-field>
                    </div>
                    <div class="sm:flex gap-3">
                        <mat-form-field>
                            <mat-label>Phone</mat-label>
                            <input matInput formControlName="phone" />
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Fax</mat-label>
                            <input matInput formControlName="fax" />
                        </mat-form-field>
                        <mat-form-field>
                            <mat-label>Email</mat-label>
                            <input
                                matInput
                                type="email"
                                formControlName="email"
                            />
                        </mat-form-field>
                    </div>
                </div>
            </div>

            <div class="flex justify-end">
                <button
                    mat-raised-button
                    color="primary"
                    (click)="goToNextTab()"
                >
                    Next
                </button>
            </div>
        </form>
    </mat-tab>

    <!-- Images Tab -->
    <mat-tab label="Images">
        <form [formGroup]="hotelForm">
            <div class="my-5">
                <h2 class="text-xl font-semibold mb-5">Hotel Images:</h2>
            </div>
            <div formArrayName="HotelImages" class="flex flex-wrap gap-2">
                <div
                    *ngFor="let image of images.controls; let i = index"
                    class="relative"
                >
                    <div>
                        <img
                            [src]="image.get('Url').value"
                            alt="Hotel Image"
                            class="object-cover w-[150px] h-[100px]"
                            loading="lazy"
                        />
                        <div class="absolute top-0 right-0 p-2">
                            <button
                                mat-icon-button
                                (click)="openEditHotelImage(i)"
                                style="
                                    background-color: black;
                                    color: white;
                                    border-radius: 50%;
                                "
                            >
                                <mat-icon>edit</mat-icon>
                            </button>
                        </div>
                        <h1 class="text-center bg-gray-600 text-white py-2">{{ image.get("ImageType").value }}</h1>
                    </div>
                </div>
                <div class="w-full py-5">
                    <button
                        type="button"
                        mat-stroked-button
                        class="navy-blue-button w-full"
                        (click)="addImage()"
                    >
                        Add Image
                    </button>
                </div>
            </div>
        </form>
        <div class="flex justify-end">
            <button mat-raised-button color="primary" (click)="goToNextTab()">
                Next
            </button>
        </div>
    </mat-tab>

    <!-- Additional Tab -->
    <mat-tab label="Additional Information">
        <form [formGroup]="hotelForm">
            <mat-form-field class="w-full">
                <mat-label class="text-xl font-semibold mb-5">Website</mat-label>
                <input matInput formControlName="Website" />
            </mat-form-field>
            <h2 class="text-xl font-semibold mb-5">Remarks</h2>
            <div formArrayName="HotelRemarks">
                <mat-accordion>
                    <div
                        *ngFor="let remark of remarks.controls; let i = index"
                        [formGroupName]="i"
                    >
                        <mat-expansion-panel class="mb-3">
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    {{
                                        remark.get("RemarkType").value ||
                                            "Remark " + (i + 1)
                                    }}
                                </mat-panel-title>

                                <mat-action-row>
                                    <button
                                        mat-button
                                        color="warn"
                                        (click)="removeRemark(i)"
                                    >
                                        Remove Remark
                                    </button>
                                </mat-action-row>
                            </mat-expansion-panel-header>

                            <div
                                class="flex flex-wrap gap-5 md:flex-row flex-col"
                            >
                                <mat-form-field class="flex-auto">
                                    <mat-label>Remark Type</mat-label>
                                    <input
                                        matInput
                                        formControlName="RemarkType"
                                    />
                                </mat-form-field>
                                <mat-form-field class="flex-auto">
                                    <mat-label>Free Text</mat-label>
                                    <textarea
                                        matInput
                                        formControlName="FreeText"
                                    ></textarea>
                                </mat-form-field>
                            </div>
                        </mat-expansion-panel>
                    </div>
                </mat-accordion>
                <div class="w-full py-5">
                    <button
                        type="button"
                        mat-stroked-button
                        class="navy-blue-button w-full"
                        (click)="addRemark()"
                    >
                        Add Remark
                    </button>
                </div>
            </div>
            <h2 class="text-xl font-semibold mb-5">Facilities</h2>
            <div formArrayName="HotelFacilities" class="flex flex-wrap gap-2">
                <div
                    *ngFor="let facility of facilities.controls; let i = index"
                >
                    <button
                        mat-stroked-button
                        (click)="openEditFacility(i)"
                        class="facilityChip"
                    >
                        {{
                            facility.get("FacilityTitle").value ||
                                "Facility " + (i + 1)
                        }}
                    </button>
                </div>
                <div class="w-full py-5">
                    <button
                        type="button"
                        mat-stroked-button
                        class="navy-blue-button w-full"
                        (click)="addFacility()"
                    >
                        Add Facility
                    </button>
                </div>
            </div>

            <div class="flex justify-end">
                <button mat-raised-button color="accent" (click)="submitForm()">
                    Submit
                </button>
            </div>
        </form>
    </mat-tab>
</mat-tab-group>
